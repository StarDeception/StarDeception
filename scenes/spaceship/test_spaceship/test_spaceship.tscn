[gd_scene load_steps=11 format=3 uid="uid://xud5xo51ir5r"]

[ext_resource type="Script" uid="uid://bpb1urve1pqnj" path="res://scenes/spaceship/test_spaceship/test_spaceship.gd" id="1_f1s04"]
[ext_resource type="Material" uid="uid://wm1k35sl1iwp" path="res://assets/materials/material_basic_orange.tres" id="1_vvggs"]
[ext_resource type="Script" uid="uid://di4o647k2wjid" path="res://scenes/spaceship/test_spaceship/ship_console.gd" id="2_xjcjc"]
[ext_resource type="PackedScene" uid="uid://dumbqmrjvj582" path="res://scenes/grid/physics_grid.tscn" id="3_xjcjc"]
[ext_resource type="Script" uid="uid://6f0l3p44h7vy" path="res://server/persistance_manager/DataEntity.gd" id="5_mugai"]

[sub_resource type="SceneReplicationConfig" id="SceneReplicationConfig_xjcjc"]
properties/0/path = NodePath(".:position")
properties/0/spawn = true
properties/0/replication_mode = 1
properties/1/path = NodePath(".:rotation")
properties/1/spawn = true
properties/1/replication_mode = 1
properties/2/path = NodePath("PilotSeat:remote_path")
properties/2/spawn = true
properties/2/replication_mode = 1

[sub_resource type="BoxShape3D" id="BoxShape3D_hn282"]
size = Vector3(3.16406, 3.22339, 5.33411)

[sub_resource type="BoxShape3D" id="BoxShape3D_xjcjc"]
size = Vector3(1, 0.820801, 0.291077)

[sub_resource type="BoxShape3D" id="BoxShape3D_mugai"]
size = Vector3(3.59961, 2.85254, 6.43599)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_f1s04"]
data = PackedVector3Array(0.5, -1.48258, -3.12862, 1.80969, -1.48258, -3.68953, 0.5, -1.48258, -3.55354, -0.5, -1.48258, -3.12862, -1.80969, -1.48258, 1.58959, 0.5, -1.48258, -3.12862, -1.80969, -1.48258, 1.58959, -1.80969, -0.568054, -3.68953, -1.80969, 1.12633, 3.68953, -1.80969, 1.48258, -0.839348, -1.80969, 1.12633, 3.68953, -1.80969, -0.568054, -3.68953, -1.80969, 1.12633, 3.68953, -1.80969, 1.48258, -0.839348, -1.80969, 1.48258, 3.68953, -1.50293, 1.23018, 3.68953, -1.50293, 1.12633, 3.68953, -1.80969, 1.12633, 3.68953, -1.80969, 1.48258, 3.68953, -1.50293, 1.23018, 3.68953, -1.80969, 1.12633, 3.68953, -1.80969, 1.48258, -0.839348, 1.80969, 1.48258, 3.68953, -1.80969, 1.48258, 3.68953, -1.50293, 1.23018, 3.68953, -1.80969, 1.48258, 3.68953, 1.50293, 1.23018, 3.68953, -1.80969, -1.48258, -3.68953, 0.5, -1.48258, -3.55354, 1.80969, -1.48258, -3.68953, 1.80969, -1.48258, -3.68953, 1.50293, -1.33812, -3.68953, -1.80969, -1.48258, -3.68953, 0.5, -1.48258, -3.12862, -1.80969, -1.48258, 1.58959, 1.80969, -1.48258, -3.68953, -1.80969, -1.48258, 1.58959, 1.80969, -1.48258, 1.58959, 1.80969, -1.48258, -3.68953, -1.50293, -1.33812, -3.68953, -1.50293, -0.568054, -3.68953, -1.80969, -1.48258, -3.68953, 1.80969, -1.48258, -3.68953, 1.50293, -1.33812, -3.68953, 1.50293, -1.33812, -3.68953, 1.80969, -1.48258, -3.68953, 1.50293, -0.568054, -3.68953, 1.50293, -1.33812, -3.68953, 1.80969, -1.48258, -3.68953, 1.80969, -0.568054, -3.68953, 1.50293, -0.568054, -3.68953, 1.80969, -1.48258, 1.58959, 1.80969, 1.48258, 3.68953, 1.80969, -1.48258, -3.68953, 1.80969, -1.48258, -3.68953, 1.80969, 1.48258, -0.839348, 1.80969, -0.568054, -3.68953, 1.80969, 1.48258, 3.68953, 1.80969, 1.48258, -0.839348, 1.80969, -1.48258, -3.68953, 1.80969, 1.48258, -0.839348, 1.80969, 1.48258, 3.68953, -1.80969, 1.48258, -0.839348, 1.80969, 1.48258, 3.68953, 1.50293, 1.23018, 3.68953, -1.80969, 1.48258, 3.68953, 1.80969, 1.12633, 3.68953, 1.80969, 1.48258, 3.68953, 1.80969, -1.48258, 1.58959, 1.50293, 1.23018, 3.68953, 1.80969, 1.12633, 3.68953, 1.50293, 1.12633, 3.68953, 1.80969, 1.48258, 3.68953, 1.80969, 1.12633, 3.68953, 1.50293, 1.23018, 3.68953, -1.80969, -1.48258, -3.68953, -1.50293, -1.33812, -3.68953, -1.50293, -1.33812, -3.68953, -0.5, -1.48258, -3.55354, -1.80969, -1.48258, -3.68953, -0.5, -1.48258, -3.12862, -1.80969, -0.568054, -3.68953, -1.80969, -1.48258, 1.58959, -1.80969, -1.48258, -3.68953, -1.50293, -1.33812, -3.68953, -1.80969, -1.48258, -3.68953, 1.50293, -1.33812, -3.68953, -0.5, -1.48258, -3.55354, 0.5, -1.48258, -3.55354, -1.80969, -1.48258, -3.68953, -0.5, -1.48258, -3.12862, -1.80969, -1.48258, -3.68953, -1.80969, -1.48258, 1.58959, -1.50293, -0.568054, -3.68953, -1.80969, -0.568054, -3.68953, -1.80969, -1.48258, -3.68953, -1.50293, -0.354064, -3.3921, -1.50293, -1.33812, -3.3921, -1.50293, 1.23018, 3.68953, -0.5, -1.33812, -3.55354, -1.50293, -1.33812, -3.68953, 1.50293, -1.33812, -3.68953, -1.50293, 1.23018, 3.68953, -1.50293, 1.23018, -1.19015, -1.50293, -0.354064, -3.3921, -1.50293, 1.12633, 3.68953, -1.50293, 1.23018, 3.68953, -1.50293, -1.33812, 1.70587, -1.50293, 1.23018, 3.68953, 1.50293, 1.23018, -1.19015, -1.50293, 1.23018, -1.19015, -0.5, -1.33812, -3.55354, 1.50293, -1.33812, -3.68953, 0.5, -1.33812, -3.55354, 0.5, -1.33812, -3.55354, 1.50293, -1.33812, -3.68953, 0.5, -1.33812, -3.12862, -1.50293, -1.33812, -3.68953, -0.5, -1.33812, -3.55354, -0.5, -1.33812, -3.12862, 1.50293, -1.33812, 1.70587, -0.5, -1.33812, -3.12862, 0.5, -1.33812, -3.12862, 1.50293, -1.33812, -3.3921, 1.50293, -1.33812, -3.68953, 1.50293, -1.33812, -3.68953, 0.5, -1.33812, -3.12862, 1.50293, -1.33812, -3.68953, 1.50293, -1.33812, 1.70587, 1.50293, -1.33812, -3.3921, 1.50293, -1.33812, 1.70587, 1.50293, -1.33812, -3.68953, 1.50293, 1.12633, 3.68953, 1.50293, -1.33812, 1.70587, 1.50293, -1.33812, -3.3921, 1.50293, -0.354064, -3.3921, 1.50293, 1.12633, 3.68953, 1.50293, -1.33812, -3.3921, -1.50293, -1.33812, -3.68953, -1.50293, -1.33812, 1.70587, -1.50293, -1.33812, -3.3921, 1.50293, -0.354064, -3.3921, 1.50293, 1.23018, -1.19015, 1.50293, 1.12633, 3.68953, 1.50293, 1.23018, 3.68953, 1.50293, 1.23018, -1.19015, -1.50293, 1.23018, 3.68953, 1.50293, 1.23018, 3.68953, 1.50293, 1.12633, 3.68953, 1.50293, 1.23018, -1.19015, -1.50293, -1.33812, -3.68953, -1.50293, -1.33812, -3.68953, -1.50293, -1.33812, -3.3921, -1.50293, -1.33812, -3.68953, -0.5, -1.33812, -3.12862, 1.50293, -1.33812, 1.70587, -1.50293, -1.33812, 1.70587, -1.50293, 1.23018, 3.68953, -1.50293, -1.33812, -3.3921, -1.50293, -1.33812, -3.68953, 1.50293, -1.33812, 1.70587, -1.50293, -1.33812, 1.70587, 1.50293, -0.354064, -3.3921, 1.50293, -1.33812, -3.3921, 0.5, -0.526114, -3.3921, 0.5, -0.526114, -3.3921, 1.50293, -1.33812, -3.3921, 0.5, -1.33812, -3.3921, -0.5, -0.526114, -3.3921, 1.50293, -0.354064, -3.3921, 0.5, -0.526114, -3.3921, 1.50293, -1.33812, -3.97432, 0.5, -1.33812, -3.55354, 1.50293, -1.33812, -3.68953, 1.50293, -1.33812, -3.68953, 0.5, -1.33812, -3.55354, 0.5, -1.33812, -3.3921, 1.50293, -1.33812, -3.97432, 1.50293, -0.77295, -3.97432, -1.50293, -1.33812, -3.97432, 1.50293, -1.33812, -3.68953, 0.5, -1.33812, -3.3921, 1.50293, -1.33812, -3.3921, 1.50293, -1.33812, -3.68953, 1.50293, -0.77295, -3.97432, 1.50293, -1.33812, -3.97432, -0.5, -1.33812, -3.55354, 0.5, -1.33812, -3.55354, 1.50293, -1.33812, -3.97432, -0.5, -1.33812, -3.3921, -0.5, -1.33812, -3.55354, -1.50293, -1.33812, -3.3921, -1.50293, -0.354064, -3.3921, -0.5, -1.33812, -3.3921, -1.50293, -1.33812, -3.3921, -0.5, -0.526114, -3.3921, -1.50293, -0.354064, -3.3921, 1.50293, -0.354064, -3.3921, -0.5, -1.33812, -3.55354, 1.50293, -1.33812, -3.97432, -1.50293, -1.33812, -3.3921, -1.50293, -0.77295, -3.97432, -1.50293, -0.568054, -3.68953, -1.50293, -1.33812, -3.68953, -1.50293, -1.33812, -3.97432, -1.50293, -0.77295, -3.97432, -1.50293, -1.33812, -3.68953, -1.50293, -1.33812, -3.68953, 1.50293, -1.33812, -3.97432, -1.50293, -1.33812, -3.97432, -1.50293, -0.354064, -3.3921, -0.5, -0.526114, -3.3921, -0.5, -1.33812, -3.3921, -1.50293, -1.33812, -3.3921, 1.50293, -1.33812, -3.97432, -1.50293, -1.33812, -3.68953, 1.50293, -0.568054, -3.68953, 1.50293, -0.77295, -3.97432, 1.50293, -1.33812, -3.68953, -1.50293, -1.33812, -3.97432, 1.50293, -0.77295, -3.97432, -1.50293, -0.77295, -3.97432, 1.80969, 1.48258, -0.839348, 1.50293, -0.354064, -3.3921, 1.80969, -0.568054, -3.68953, 1.50293, -0.77295, -3.97432, 1.50293, -0.568054, -3.68953, -1.50293, -0.354064, -3.3921, -1.50293, -0.354064, -3.3921, -1.50293, 1.23018, -1.19015, -1.80969, -0.568054, -3.68953, 1.80969, 1.48258, -0.839348, 1.50293, 1.23018, -1.19015, 1.50293, -0.354064, -3.3921, 1.50293, -0.77295, -3.97432, -1.50293, -0.568054, -3.68953, -1.50293, -0.77295, -3.97432, 1.50293, -0.77295, -3.97432, -1.50293, -0.354064, -3.3921, -1.50293, -0.568054, -3.68953, 1.50293, 1.23018, -1.19015, 1.80969, 1.48258, -0.839348, -1.80969, 1.48258, -0.839348, 1.80969, -0.568054, -3.68953, 1.50293, -0.354064, -3.3921, 1.50293, -0.568054, -3.68953, -1.50293, -0.568054, -3.68953, -1.50293, -0.354064, -3.3921, -1.80969, -0.568054, -3.68953, 1.50293, -0.568054, -3.68953, 1.50293, -0.354064, -3.3921, -1.50293, -0.354064, -3.3921, -1.50293, 1.23018, -1.19015, -1.80969, 1.48258, -0.839348, -1.80969, -0.568054, -3.68953, -1.50293, 1.23018, -1.19015, 1.50293, 1.23018, -1.19015, -1.80969, 1.48258, -0.839348, 1.50293, -1.33812, 1.70587, 1.80969, -1.48258, 1.58959, -1.80969, -1.48258, 1.58959, -1.50293, -1.33812, 1.70587, 1.50293, -1.33812, 1.70587, -1.80969, -1.48258, 1.58959, 1.50293, 1.12633, 3.68953, 1.80969, -1.48258, 1.58959, 1.50293, -1.33812, 1.70587, -1.80969, 1.12633, 3.68953, -1.50293, 1.12633, 3.68953, -1.50293, -1.33812, 1.70587, -1.80969, 1.12633, 3.68953, -1.50293, -1.33812, 1.70587, -1.80969, -1.48258, 1.58959, 1.50293, 1.12633, 3.68953, 1.80969, 1.12633, 3.68953, 1.80969, -1.48258, 1.58959, -0.5, -1.52611, -3.55354, 0.5, -1.48258, -3.55354, -0.5, -1.48258, -3.55354, -0.5, -0.526114, -3.3921, -0.5, -1.33812, -3.12862, -0.5, -1.33812, -3.3921, -0.5, -1.33812, -3.55354, -0.5, -1.33812, -3.3921, -0.5, -1.33812, -3.12862, -0.5, -0.526114, -3.12862, -0.5, -1.33812, -3.12862, -0.5, -0.526114, -3.3921, -0.5, -1.33812, -3.55354, -0.5, -1.33812, -3.12862, -0.5, -1.33812, -3.55354, -0.5, -1.52611, -3.12862, -0.5, -1.48258, -3.12862, 0.5, -1.52611, -3.12862, -0.5, -0.526114, -3.12862, 0.5, -0.526114, -3.12862, -0.5, -1.33812, -3.12862, -0.5, -1.33812, -3.55354, 0.5, -1.33812, -3.55354, -0.5, -1.33812, -3.55354, 0.5, -0.526114, -3.12862, -0.5, -0.526114, -3.12862, -0.5, -0.526114, -3.3921, 0.5, -0.526114, -3.3921, 0.5, -1.33812, -3.12862, 0.5, -0.526114, -3.12862, 0.5, -1.48258, -3.12862, 0.5, -1.48258, -3.55354, 0.5, -1.52611, -3.55354, 0.5, -1.33812, -3.3921, 0.5, -1.33812, -3.12862, 0.5, -0.526114, -3.3921, -0.5, -0.526114, -3.3921, 0.5, -0.526114, -3.3921, 0.5, -0.526114, -3.12862, -0.5, -1.33812, -3.12862, 0.5, -0.526114, -3.12862, 0.5, -1.33812, -3.12862, -0.5, -1.52611, -3.12862, -0.5, -1.48258, -3.55354, -0.5, -1.48258, -3.12862, -0.5, -1.52611, -3.55354, -0.5, -1.52611, -3.12862, 0.5, -1.52611, -3.55354, -0.5, -1.52611, -3.55354, -0.5, -1.48258, -3.55354, -0.5, -1.52611, -3.12862, 0.5, -1.33812, -3.3921, 0.5, -1.33812, -3.55354, 0.5, -1.33812, -3.12862, 0.5, -1.33812, -3.55354, 0.5, -1.33812, -3.55354, 0.5, -1.33812, -3.3921, 0.5, -1.48258, -3.12862, 0.5, -1.52611, -3.55354, 0.5, -1.52611, -3.12862, 0.5, -1.52611, -3.55354, 0.5, -1.48258, -3.55354, -0.5, -1.52611, -3.55354, 0.5, -1.33812, -3.55354, -0.5, -1.33812, -3.55354, 0.5, -1.33812, -3.55354, 0.5, -1.52611, -3.12862, -0.5, -1.48258, -3.12862, 0.5, -1.48258, -3.12862, -0.5, -1.52611, -3.12862, 0.5, -1.52611, -3.12862, 0.5, -1.52611, -3.55354, 1.2959, -1.55189, 1.62544, -1.2959, -1.34243, 1.70789, -1.2959, -1.55189, 1.62544, -1.2959, -1.7087, 2.6384, 1.2959, -1.7087, 2.6384, -1.2959, -1.91816, 2.55595, -1.2959, -1.91816, 2.55595, -1.2959, -1.55189, 1.62544, -1.2959, -1.34243, 1.70789, -1.2959, -1.91816, 2.55595, 1.2959, -1.55189, 1.62544, -1.2959, -1.55189, 1.62544, -1.2959, -1.34243, 1.70789, -1.2959, -1.7087, 2.6384, -1.2959, -1.91816, 2.55595, 1.2959, -1.34243, 1.70789, 1.2959, -1.55189, 1.62544, 1.2959, -1.7087, 2.6384, 1.2959, -1.7087, 2.6384, 1.2959, -1.55189, 1.62544, 1.2959, -1.91816, 2.55595, -1.2959, -1.34243, 1.70789, 1.2959, -1.7087, 2.6384, -1.2959, -1.7087, 2.6384, 1.2959, -1.34243, 1.70789, 1.2959, -1.7087, 2.6384, -1.2959, -1.34243, 1.70789, 1.2959, -1.7087, 2.6384, 1.2959, -1.91816, 2.55595, -1.2959, -1.91816, 2.55595, 1.2959, -1.91816, 2.55595, 1.2959, -1.55189, 1.62544, -1.2959, -1.91816, 2.55595, 1.2959, -1.55189, 1.62544, 1.2959, -1.34243, 1.70789, -1.2959, -1.34243, 1.70789)

[node name="TestSpaceship" type="RigidBody3D"]
mass = 1000.0
continuous_cd = true
linear_damp = 0.2
angular_damp = 2.0
script = ExtResource("1_f1s04")
speed = 2000
roll_speed = 300

[node name="MultiplayerSynchronizer" type="MultiplayerSynchronizer" parent="."]
replication_config = SubResource("SceneReplicationConfig_xjcjc")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.458999, -1.28591)
shape = SubResource("BoxShape3D_hn282")

[node name="ShipConsole" type="Area3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.921729, -3.45297)
script = ExtResource("2_xjcjc")
label = "Pilot ship [F]"

[node name="CollisionShape3D" type="CollisionShape3D" parent="ShipConsole"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.552779, -0.0702209)
shape = SubResource("BoxShape3D_xjcjc")

[node name="PilotSeat" type="RemoteTransform3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.763, -2.664)

[node name="ShipPhysicsGrid" parent="." instance=ExtResource("3_xjcjc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.921729, -3.45297)

[node name="CollisionShape3D2" type="CollisionShape3D" parent="ShipPhysicsGrid"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.46199, 2.71799)
shape = SubResource("BoxShape3D_mugai")

[node name="CSGBox3D" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.561571, -0.263438)
size = Vector3(3.61938, 2.96515, 7.37906)
material = ExtResource("1_vvggs")

[node name="CSGBox3D2" type="CSGBox3D" parent="CSGBox3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.0539665, -0.449631)
operation = 2
size = Vector3(3.00586, 2.5683, 8.62767)
material = ExtResource("1_vvggs")

[node name="CSGBox3D5" type="CSGBox3D" parent="CSGBox3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.805416, -3.68321)
size = Vector3(3.00586, 1.0654, 0.582211)
material = ExtResource("1_vvggs")

[node name="CSGBox3D3" type="CSGBox3D" parent="CSGBox3D"]
transform = Transform3D(1, 0, 0, 0, 0.811737, 0.584023, 0, -0.584023, 0.811737, 0, 1.07062, -3.1071)
operation = 2
size = Vector3(5.47656, 1.98004, 4.65421)
material = ExtResource("1_vvggs")

[node name="CSGBox3D4" type="CSGBox3D" parent="CSGBox3D"]
transform = Transform3D(1, 0, 0, 0, 0.627025, 0.778999, 0, -0.778999, 0.627025, 0, -0.452029, 3.68998)
operation = 2
size = Vector3(5.47656, 1.98004, 4.65421)
material = ExtResource("1_vvggs")

[node name="CSGBox3D6" type="CSGBox3D" parent="CSGBox3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -1.02611, -3.34108)
size = Vector3(1, 1, 0.424927)

[node name="CSGBox3D" type="CSGBox3D" parent="CSGBox3D"]
transform = Transform3D(1, 0, 0, 0, 0.930507, -0.366274, 0, 0.366274, 0.930507, 0, -1.6303, 2.13192)
size = Vector3(2.5918, 0.225098, 1)

[node name="StaticBody3D" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.921729, -3.45297)

[node name="CSGBakedCollisionShape3D" type="CollisionShape3D" parent="StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.4833, 3.18953)
shape = SubResource("ConcavePolygonShape3D_f1s04")

[node name="SpotLight3D" type="SpotLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.921729, -4.98048)
light_energy = 3.0
spot_range = 500.0
spot_angle = 30.0

[node name="DataEntity" type="Node" parent="."]
script = ExtResource("5_mugai")
metadata/_custom_type_script = "uid://6f0l3p44h7vy"

[connection signal="area_entered" from="ShipPhysicsGrid" to="." method="_on_collision_area_entered"]
[connection signal="area_exited" from="ShipPhysicsGrid" to="." method="_on_collision_area_exited"]
[connection signal="body_entered" from="ShipPhysicsGrid" to="." method="_on_gravity_area_body_entered"]
[connection signal="body_exited" from="ShipPhysicsGrid" to="." method="_on_gravity_area_body_exited"]
